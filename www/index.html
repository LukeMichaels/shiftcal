<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css">
    <link rel="stylesheet" type="text/css" href="index.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.7.0/mustache.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/formdata.js"></script>
    <script src="shiftcal.js"></script>
    <title>S H I F T to Bikes</title>
</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>   
                <a class="navbar-brand" href="/">
                    <img alt="Shift2Bikes" src="images/shiftLogo_plain.gif" />
                </a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a href="#viewEvents" id="view-events-button">Events</a>
                    </li>
                    <li>
                        <a href="#addEvent" id="add-event-button">Add Event</a>
                    </li>
                    <li>
                        <a href="#pedalpalooza" id="pedalpalooza-button">Pedalpalooza</a>
                    </li>
                    <li>
                        <a href="#oldSite" id="oldSite-button">Old Website</a>
                    </li>
                    <li>                    
                        <a href="#about" id="about-button">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    
    <div id="mustache-html" class="container"></div>

    <div class="modal fade" tabindex="-1" id="cancel-modal" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-body">
                    <h4>Are you sure you want to cancel?</h4>
                </div>
                <div class="modal-footer">
                    <button type="button" id="confirm-cancel" data-dismiss="modal" class="btn btn-warning">Yes</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal">No</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <script id="mustache-template" type="text/template">
    
        {{#pedalpalooza}}
            <div class="pg-width">
    	        <img alt="Pedalpalooza" src= {{pedalpalooza}} />
    	        <p> Pedalpalooza is 3+ weeks of bikey fun. With 266 different events, most organized by individuals, bikers of all persuasions are likely to find many events of interest. Nearly all events are free. </p>
    	        <p> Visiting from out of town? We've started a <a href="http://www.shift2bikes.org/allbike.php#Visitor_Info">Visitor Info</a> page on our Wiki.</p>
    	    </div>
    	{{/pedalpalooza}}
        {{^ append}}
            <div class="plain">
        	    <p class="audience-F">Family Friendly events have green times.</p>
        	    <p class="audience-A">Adult Only (21+) events have red times.</p>
    	    </div>
        {{/append}}
    	

        
        {{#dates}}
        <div class="date{{#preview}} preview{{/preview}}">
        <div class="secondaryHeader">{{date}}</div>
            {{#events}}
                <div class="event row" data-event-id="{{id}}">
                    <div class="time col-xs-4">
                        <h3 class="audience-{{audience}}">{{displayTime}}</h3>
                    </div>
                    <a class="expandDetails" href="#" data-toggle="collapse" data-target="#detailsContainer{{id}}">
                        <div class="col-xs-8" >
                            <div class="summary">
                                <h3> {{title}} </h3>
                                <p> {{venue}} </p>
                                <p> {{address}} </p>
                                <p> {{length}}</p>
                            </div>
                        </div>
                    </a>
                    <div id="detailsContainer{{id}}" {{^ preview }}class="collapse"{{/ preview }}>
                        <div class="hideButton col-xs-4">
                            {{^ preview }}<button class="btn btn-expand" data-toggle="collapse" data-target="#detailsContainer{{id}}">Hide</button>{{/ preview }}
                        </div>
                        <div class="eventDetails col-xs-8">
                            <div class="otherButtons">
                                <a href="{{mapLink}}" target="_blank">
                                    <button class="btn btn-expand map">Map</button>
                                </a>{{^ preview }}
                               
                                {{#showEditButton}}<a href="#editEvent/{{id}}" >
                                    <button class="btn btn-default edit">Edit</button>
                                </a>{{/showEditButton}}{{/ preview }}
                            </div>
                            <div class="mainDetails">
                                {{# image}}
                                <img src="{{image}}" />
                                {{/ image}}
                                <p>{{details}}</p>
                                <p class="contactInfo">Organized by: {{organizer}}</p>
                                {{#email}}
                                <p class="email">Contact info: {{email}}</p>
                                {{/email}}
                            </div>
                        </div>
                    </div>
                </div>
            {{/events}}
        </div>
        {{/dates}}
        {{^ pedalpalooza }}
            {{^ preview }}
                <a id="load-more" href="#">Show additional events</a>
            {{/ preview }}
        {{/pedalpalooza }}
    </script>
    <script id="mustache-edit" type="text/template">
        <div id="edit-header" >
           
                <button id="preview-edit-button" type="button" class="btn btn-addEvent">Edit</button>
                <button id="preview-button" type="button" class="btn btn-addEvent">Preview</button>
                <button id="save-button" type="button" class="btn btn-addEvent">Post</button>
                <button id="cancel-button" type="button" class="btn btn-addEvent" data-toggle="modal" data-target="#cancel-modal">Cancel</button>
            
            <span id="save-result"></span>
        </div>
        <br>
        <form id="event-entry">
            <input type="hidden" name="id" value="{{id}}" />
            <input type="hidden" name="secret" value="{{secret}}" />
            <div class="panel-group" role="tablist" id="event-fields">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a role="button" data-toggle="collapse" data-parent="#event-fields" href="#general-fields">
                            Basic facts
                        </a>
                    </div>
                    
                    <div id="general-fields" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div class="form-group">
                                <label class="control-label" for="title">Event title:</label>
                                <input type="text" class="form-control" name="title" id="title" value="{{title}}" />
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="details">Description:</label>
                                <textarea class="form-control" name="details" id="details" >{{details}}</textarea>
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="venue">Venue name:</label>
                                <input type="text" class="form-control" name="venue" id="venue" value="{{venue}}" />
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="address">Address</label>
                                <input type="text" class="form-control" name="address" id="address" value="{{address}}" />
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="length">Length of route:</label>
                                <select name="length" class="form-control" id="length">
                                    {{# lengthOptions }}
                                    <option value="{{range}}" {{# isSelected }}selected{{/ isSelected }}>{{range}} miles</option>
                                    {{/ lengthOptions }}
                                </select>
                            </div>
                            <div id="date-select-container" class="form-group">
                                <table class="day-of-week">
                                    <tr>
                                        <td class="calendar-month-title"></td>
                                        <td>Sun</td>
                                        <td>Mon</td>
                                        <td>Tue</td>
                                        <td>Wed</td>
                                        <td>Thu</td>
                                        <td>Fri</td>
                                        <td>Sat</td>
                                    </tr>
                                </table>
                                <div id="date-select">                                    
                                    <div id="load-earlier" class="loading-zone"></div>
                                    <table id="month-table">
                                    </table>
                                    <div id="load-later" class="loading-zone"></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="time">Time:</label>
                                <select name="time" class="form-control" id="time">
                                    {{# timeOptions }}
                                    <option value="{{time}}" {{# isSelected }}selected{{/ isSelected }}>{{time}}</option>
                                    {{/ timeOptions }}
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a role="button" data-toggle="collapse" data-parent="#event-fields" href="#optional-fields">
                            Optional details
                        </a>
                    </div>
                    <div id="optional-fields" class="panel-collapse collapse">
                        <div class="panel-body">
                            <div class="form-group">
                                <label class="control-label" for="timedetails">Time details:</label>
                                <input type="text" class="form-control" name="timedetails" id="timedetails" value="{{timedetails}}" />
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="weburl">Website for more details:</label>
                                <input type="text" class="form-control" name="weburl" id="weburl" value="{{weburl}}" />
                            </div>
                            {{# image}}
                            <img src="{{image}}" />
                            {{/ image}}
                            <div class="form-group">
                                {{# image}}
                                <label class="control-label" for="image">Update Image:</label>
                                {{/ image}}
                                {{^ image}}
                                <label class="control-label" for="image">Image:</label>
                                {{/ image}}
                                <input type="file" class="form-control" name="image" id="image" />
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="audience">Audience:</label>
                                <select name="audience" class="form-control" id="audience">
                                    {{# audienceOptions }}
                                    <option value="{{code}}" {{# isSelected }}selected{{/ isSelected }}>{{text}}</option>
                                    {{/ audienceOptions }}
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a role="button" data-toggle="collapse" data-parent="#event-fields" href="#contact-fields">
                            Contact info
                        </a>
                    </div>
                    <div id="contact-fields" class="panel-collapse collapse">
                        <div class="panel-body">
                            <div class="form-group">
                                <label class="control-label" for="organizer">Your name:</label>
                                <input type="text" class="form-control" name="organizer" id="organizer" value="{{organizer}}">
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="email">Your email:</label>
                                <input type="text" class="form-control" name="email" id="email" value="{{email}}" >
                            </div>
                            <div class="checkbox">
                                <input type="hidden" name="email-me" value="0" />
                                <label class="control-label" for="email-me">
                                    <input type="checkbox" name="email-me" id="email-me" value="1"  {{# emailMe }}checked{{/ emailMe }} />
                                    Send forum messages to this email address
                                </label>
                            </div>
                            <div class="checkbox">
                                <input type="hidden" name="hideemail" value="0" />
                                <label class="control-label" for="hideemail">
                                    <input type="checkbox" name="hideemail" id="hideemail" value="1"  {{# hideemail }}checked{{/ hideemail }} />
                                    Don't publish my email address online
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a role="button" data-toggle="collapse" data-parent="#event-fields" href="#print-fields">
                            Printed calendar
                        </a>
                    </div>
                    <div id="print-fields" class="panel-collapse collapse">
                        <div class="panel-body">
                            <div class="checkbox">
                                <input type="hidden" name="printevent" value="0" />
                                <label class="control-label" for="printevent">
                                    <input type="checkbox" name="printevent" id="printevent" value="1" {{# printevent }}checked{{/ printevent }} />
                                    Include in the print calendar?
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="tinytitle">Tiny title (24 chars):</label>
                                <input type="text" class="form-control" name="tinytitle" id="tinytitle" value="{{tinytitle}}" maxlength="24" />
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="printdescr">Print description (120 chars):</label>
                                <textarea class="form-control" name="printdescr" id="printdescr" maxlength="120" >{{printdescr}}</textarea>
                            </div>
                            <!--div class="form-group">
                                <label class="control-label" for="printcontact">Print contact info:</label>
                                <input type="text" class="form-control" name="printcontact" id="printcontact" value="{{printcontact}}" maxlength="255" />
                            </div-->
                        </div>
                    </div>
                </div>
            </div>
            <p>For tips on making your ride successful, we ask that you read the <a href="rideleadingcomic.html">Ride Leading Comic</a> at least once before submitting an event</p>
            <div class="checkbox">
                <input type="hidden" name="read_comic" value="0" />
                <label class="control-label" for="read_comic">
                    <input type="checkbox" name="read_comic" id="read_comic" value="1" {{# readComic }}checked{{/ readComic }} />
                    I have read the Ride Leading Comic
                </label>
            </div>
        </form>
    </script>
    <script id="mustache-select-month" type="text/template">
        {{#weeks}}
        <tr class="calendar-row">
            {{#monthTitle}}
            <td rowspan="{{weeksInMonth}}" class="calendar-month-title"><span>{{monthTitle}}</span></td>
            {{/monthTitle}}
            {{#days}}
            <td class="calendar-day {{classes}}" data-date="{{date}}">{{day}}</td>
            {{/days}}
        </tr>
        {{/weeks}}
    </script>
    
    <script id="aboutUs" type="text">
        <div id="about" >
        	<div class="secondaryHeader">About SHIFT</div>
			<div class="plain">
			    <br>
                <p>SHIFT helps other groups and individuals promote their "bike fun" events. Most of the events in this calendar are not produced by Shift. Anyone is welcome to post events. </p>
                <p>SHIFT is the force behind Pedalpalooza. It also coordinates fun bicycling events throughout the year. Our mission is to demonstrate that bicycling is fun, liberating, empowering, sustainable, and environmentally friendly. We ask for no membership, nor dues. We ask for only a shared passion for the bicycle in all its glory: as toy, as transportation, as tool for social and environmental change! </p>
                <p>Join the <a href="https://lists.riseup.net/www/subrequest/shift"> SHIFT listserve</a></p>
                <h3>Volunteer</h3>
                <p>Breakfast on the Bridges is the last friday of every month. Present breakfast to bike commuters in an interesting way - on a bridge! Contact the ever chortling Bard of the Bridges, <a href="http://www.shift2bikes.org/contacts/index.php?eCon=BonB">Timo</a></p>
                <p>Contribute to our <a href="http://github.com/Shift2Bikes/shiftcal">source code</a></p>
                <h3>Contact information</h3>
                <p>Contact us <a href="http://www.shift2bikes.org/contacts/">here</a></p>
                <h3>Our sponsors</h3>
                <a href="http://umbrellapdx.org/"> <image alt="Umbrella PDX" src="http://umbrellapdx.org/templates/tem_trentco/images/logo.jpg" width="125"/img></a>
                <br>
                <br>
                <a href="http://www.canvashost.com/"> <image alt="Canvas Host" src="http://www.canvashost.com/images/canvashost-mobile.jpg" width="125" /img></a>
                <br>
                <h3>Donations</h3>
                <p>Donations to SHIFT can be made by mailing a check addressed to: </p>
                <p>Shift c/o Umbrella </p>
                <p>820 SW 2nd Ave. Ste. 200</p>
                <p>Portland, OR 97204</p>
                <p>Our 501(c)3 sponsor, Umbrella, will handle the rest.</p>

            </div>
        </div>
	</script>
</body>
</html>
