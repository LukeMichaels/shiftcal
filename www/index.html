<html lang="en">
<head> 
  <meta charset="UTF-8">
</head>
<body>

<style>
body {
  font-family: Arial, Helvetica, sans-serif;
}
.date {
  max-width: 400px;
  margin: auto;
}
.dateHeader{
background-color: #fdd;
float:left;
width: 99%;
padding: 5px 10px 15px;
font-weight: bold;
font-size: 1.25em;
}
.time{
float:left;
width: 25%;
text-align: right;
margin-right: 2%;
}
.details{
float:left;
width: 72%;
}

</style>

  <script src="http://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.7.0/mustache.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

  <div id="mustache-html"></div>
  <script id="mustache-template" type="text/template">
    {{#dates}}
    <div class="date">
    <div class="dateHeader">{{date}}</div>
        {{#events}}
          <div class="event">
            <div class="time"> <h3>{{time}} </h3></div>
            <div class="details">
		<h3> {{title}} </h3>
                <p> {{venue}} </p>
                <p> {{address}} </p>
                <p> {{length}}</p>
	    </div>
          </div>
        {{/events}}
    </div>
    {{/dates}}
  </script>

  <script type="text/javascript">	    
	var obj = { "events": [		
		
		{
            "id": "1009",
            "title": "A Hobbit's Ride",
            "date": "9/12/2016",
            "time": "9:30 AM",
            "venue": "Middleearth",
            "address": "123 NE 0th Ave, Portland, OR",
            "organizer": "Bilbo Baggins",
            "email": "bilbo@baggins.com",
            "details": "We will bike to the cave where Bilbo met Smeagol",
            "length": "8 miles"
        },
        {
            "id": "1010",
            "title": "Hello Ride",
            "date": "9/13/2016",
            "time": "10:30 AM",
            "venue": "Middleearth",
            "address": "123 NE 0th Ave, Portland, OR",
            "organizer": "Bilbo Baggins",
            "email": "bilbo@baggins.com",
            "details": "We will bike to the cave where Bilbo met Smeagol",
            "length": "8 miles"
        },
        {
            "id": "1011",
            "title": "Another event on the 13th",
            "date": "9/13/2016",
            "time": "2:30 PM",
            "venue": "Smaug's cavern",
            "address": "666 Misty Mountain Boulevard, Portland, OR",
            "organizer": "Bilbo Baggins",
            "email": "bilbo@baggins.com",
            "details": "We will bike to the cave where Bilbo met Smeagol",
            "length": "4 miles"
        },
          
        {
            "id": "1012",
            "title": "Goodbye Ride",
            "date": "9/14/2016",
            "time": "11:30 AM",
            "venue": "Middleearth",
            "address": "123 NE 0th Ave, Portland, OR",
            "organizer": "Bilbo Baggins",
            "email": "bilbo@baggins.com",
            "details": "We will bike to the cave where Bilbo met Smeagol",
            "length": "8 miles"
        }
		
	]};
	
	var groupedByDate = [];
	var mustacheData = { dates: [] };
	$.each(obj.events, function(index, value) {
	  var date = value.date;
	  if (groupedByDate[date] == undefined) {
	    groupedByDate[date] = {
	      date: date,
	      events: []
	    };
	    mustacheData.dates.push(groupedByDate[date]);
	  }
	  groupedByDate[date].events.push(value);
	});
	
	
	var template = $('#mustache-template').html();
	var info = Mustache.render(template, mustacheData);
	$('#mustache-html').append(info);
	  
  </script>
</body>
</html>
