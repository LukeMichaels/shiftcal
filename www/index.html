<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css">
    <link rel="stylesheet" type="text/css" href="index.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.7.0/mustache.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="shiftcal.js"></script>
    <title>S H I F T to Bikes</title>
</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="/">
                    <img alt="Shift2Bikes" src="images/shiftLogo_plain.gif" />
                </a>
            </div>
            <div id="navbar" class="navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="#addEvent" id="add-event-button">Add Event</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div id="mustache-html" class="container"></div>

    <script id="mustache-template" type="text/template">
        {{#dates}}
        <div class="date">
        <div class="dateHeader">{{date}}</div>
            {{#events}}
                <div class="event row" data-event-id="{{id}}">
                    <div class="time col-md-4">
                        <h3>{{displayTime}}</h3>
                    </div>
                    <a class="expandDetails" href="#" data-toggle="collapse" data-target="#detailsContainer{{id}}">
                        <div class="col-md-8" >
                            <div class="summary">
                                <h3> {{title}} </h3>
                                <p> {{venue}} </p>
                                <p> {{address}} </p>
                                <p> {{length}}</p>
                            </div>
                        </div>
                    </a>
                    <div id="detailsContainer{{id}}" class="collapse">
                        <div class="hideButton col-md-4">
                            <button class="btn btn-default"data-toggle="collapse" data-target="#detailsContainer{{id}}">Hide</button>
                        </div>
                        <div class="eventDetails col-md-8">
                            <div class="otherButtons">
                                <a href="{{mapLink}}" target="_blank">
                                    <button class="btn btn-default map">Map</button>
                                </a>
                                <button class="btn btn-default export">Export</button>
                            </div>
                            <div class="mainDetails">
                                <p>{{details}}</p>
                                <p class="contactInfo">Organized by: {{organizer}}</p>
                                {{#email}}
                                <p class="email">Contact info: {{email}}</p>
                                {{/email}}
                            </div>
                        </div>
                    </div>
                </div>
            {{/events}}
        </div>
        {{/dates}}
    </script>
    <script id="mustache-edit" type="text/template">
        <div id="edit-header" >
            <button id="events-button">Events</button>
            <button id="view-button">View Event</button>
            <button id="save-button">Save</button>
        </div>
        <form id="general-fields">
            <input type="hidden" name="id">{{id}}</input>
            <div class="form-group">
                <label for="title">Event title:</label>
                <input type="text" class="form-control" name="title" id="title">{{title}}</input>
            </div>
            <div class="form-group">
                <label for="details">Description:</label>
                <input type="text" class="form-control" name="details" id="details">{{description}}</input>
            </div>
            <div class="form-group">
                <label for="venue">Venue name:</label>
                <input type="text" class="form-control" name="venue" id="venue">{{venue}}</input>
            </div>
            <div class="form-group">
                <label for="address">Address</label>
                <input type="text" class="form-control" name="address" id="address">{{address}}</input>
            </div>
            <div class="form-group">
                <label for="length">Length of route:</label>
                <select name="length" class="form-control" id="length">
                    {{# lengthOptions }}
                    <option value="{{range}}" {{# isSelected }}selected{{/ isSelected }}>{{range}} miles</option>
                    {{/ lengthOptions }}
                </select>
            </div>
            <div class="form-group">
                <label for="event-dates">Dates:</label>
                <input name="start-date" class="form-control" id="start-date">{{startDate}}</input>
            </div>
            <div id="show-repeat-options"></div>
            <div id="repeat-options">
                <div class="form-group">
                    <input type="text" class="form-control" name="repeat-frequency">{{repeatFrequency}}</input>
                </div>
                <div class="form-group">
                    <label for="end-date">End date:</label>
                    <input name="end-date" class="form-control" id="end-date">{{endDate}}</input>
                </div>
            </div>
            <div class="form-group">
                <label for="time">Time:</label>
                <select name="time" class="form-control" id="time">
                    {{# timeOptions }}
                    <option value="{{time}}" {{# isSelected }}selected{{/ isSelected }}>{{time}}</option>
                    {{/ timeOptions }}
                </select>
            </div>
            <div class="form-group">
                <label for="organizer">Your name:</label>
                <input type="text" class="form-control" name="organizer" id="organizer">{{name}}</input>
            </div>
            <div class="form-group">
                <label for="email">Your email:</label>
                <input type="text" class="form-control" name="email" id="email">{{email}}</input>
            </div>
            <div class="checkbox">
                <label for="email-me">
                    <input type="checkbox" name="email-me" id="email-me" {{# emailMe }}checked{{/ emailMe }} ></input>
                    Send forum messages to this email address
                </label>
            </div>
            <div class="checkbox">
                <label for="hideemail">
                    <input type="checkbox" name="hideemail" id="hideemail" {{# hideEmail }}checked{{/ hideEmail }}></input>
                    Don't publish my email address online
                </label>
            </div>
            <p>For tips on making your ride successful, we ask that you read the <a href="rideleadingcomic.html">Ride Leading Comic</a> at least once before submitting an event</p>
            <div class="checkbox">
                <label for="read_comic">
                    <input type="checkbox" name="read_comic" id="read_comic" {{# readComic }}checked{{/ readComic }}></input>
                    I have read the Ride Leading Comic
                </label>
            </div>
        </form>
    </script>
</body>
</html>
